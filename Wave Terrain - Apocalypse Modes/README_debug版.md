# 🌸 粉色互動地形模擬器（修正版）

以 p5.js 搭配 Web Serial API 與 Arduino 感應器，實現互動式 3D 地形動畫，使用粉色系 UI 呈現末日三種地貌特效（海嘯、地震、火災），提供即時參數顯示與資料解析。

---

## 🖼️ 專案畫面特徵

- 🌊 模式 0：**Tsunami**（連續波）
- 🌍 模式 1：**Earthquake**（抽搐抖動）
- 🔥 模式 2：**Firestorm**（脈衝閃爍）
- 🎛️ 可變電阻控制「振幅 amplitude」
- 🔘 按鈕切換模式（0→1→2 循環）
- 📟 左上角顯示 FPS、模式、振幅與資料格式

---

## 🛠️ 使用方式

1. 使用支援 Web Serial 的瀏覽器（建議 **Chrome**）
2. 打開 `粉色介面（修正版）.html`
3. 點擊右上角 `🔌 連接 Arduino` 按鈕
4. 允許使用串列埠，選擇對應的 COM Port
5. 使用可變電阻與按鈕互動，改變畫面地形效果

---

## 🤖 Arduino 設定

- **可變電阻** → 接 A0  
- **按鈕** → 接 D2（使用 `INPUT_PULLUP`）

### 傳輸格式：
```
A:<振幅數值>,M:<模式編號>
```

### 範例輸出：
```
A:534,M:2
```

---

## 🧪 Debug 除錯檢查項目

| 檢查項目 | 說明 | 預期結果 |
|----------|------|-----------|
| ✅ Web Serial 支援 | 瀏覽器 console 無 `navigator.serial` 錯誤 | ✅ |
| ✅ 資料格式 | 確保 Arduino 輸出為 `A:xxx,M:x` | ✅ |
| ✅ 資料解析成功 | JS `handleSerialInput()` 可正確解析資料 | ✅ |
| ✅ 畫面變化 | 模式與振幅變化影響畫面效果 | ✅ |
| ✅ UI 提示 | 成功連接後出現 `✅ Arduino 已連線` | ✅ |
| 🧩 Debug 區塊更新 | 左上角顯示 FPS、模式、振幅資訊 | ✅ |

---

## 🐞 Debug 建議程式碼片段

於 `setInterval()` 中加入：
```js
console.log('Received:', latestSerialLine);
```

於 `handleSerialInput()` 中加入：
```js
console.log('Parsed:', amp, mod);
```

---

## ⚠️ 常見錯誤排查

| 問題現象 | 可能原因 | 解法建議 |
|----------|----------|----------|
| 無法連線 | 瀏覽器不支援 Web Serial | 改用 Chrome |
| 模式無反應 | 資料格式錯誤或無串口輸出 | 檢查 Serial 輸出是否為 `A:xxx,M:x` |
| 有資料但無畫面變化 | 資料解析失敗 | 檢查正則式是否正確 |
| UI 有顯示但無互動 | 資料未即時更新 | 加入 `console.log()` 檢查流程 |

---

## 📁 檔案說明

- `粉色介面（修正版）.html`：前端視覺與互動主程式
- `arduino程式碼.ini`：Arduino 資料輸出程式碼

---

> 若你希望加入圖片展示、切換按鈕 UI、雙語說明或改寫成 GitHub Pages 專案樣式，歡迎進一步優化 🎨✨